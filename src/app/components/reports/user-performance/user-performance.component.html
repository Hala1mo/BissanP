<div class="container">
  <div class="row mb-3 pb-3 border-bottom">
    <!--    ACTIONS   -->
    <div class="col-12">
      <button mat-raised-button color="primary" (click)="exportTable()">
        <mat-icon>cloud_download</mat-icon>
        Export Report
      </button>
    </div>
  </div>
  <div class="row">
    <h2 class="mb-3 h5 text-capitalize">User performance</h2>
    <div class="overflow-x-auto">
      <table id="report-table" mat-table [dataSource]="rows">
        <ng-container matColumnDef="username">
          <th mat-header-cell *matHeaderCellDef>USERNAME</th>
          <td mat-cell *matCellDef="let row"> {{row.user.username}} </td>
        </ng-container>
        <ng-container matColumnDef="totA">
          <th mat-header-cell *matHeaderCellDef>TOT. ASSIGNMENTS #</th>
          <td mat-cell *matCellDef="let row"> {{row.totalAssignments}} </td>
        </ng-container>
        <ng-container matColumnDef="nstA">
          <th mat-header-cell *matHeaderCellDef>NST. ASSIGNMENTS #</th>
          <td mat-cell *matCellDef="let row"> {{row.notStartedAssignments}} </td>
        </ng-container>
        <ng-container matColumnDef="undA">
          <th mat-header-cell *matHeaderCellDef>UND. ASSIGNMENTS #</th>
          <td mat-cell *matCellDef="let row"> {{row.undergoingAssignments}} </td>
        </ng-container>
        <ng-container matColumnDef="comA">
          <th mat-header-cell *matHeaderCellDef>COM. ASSIGNMENTS #</th>
          <td mat-cell *matCellDef="let row"> {{row.completedAssignments}} </td>
        </ng-container>
        <ng-container matColumnDef="totF">
          <th mat-header-cell *matHeaderCellDef>TOT. FORMS #</th>
          <td mat-cell *matCellDef="let row"> {{row.totalForms}} </td>
        </ng-container>
        <ng-container matColumnDef="nstF">
          <th mat-header-cell *matHeaderCellDef>NST. FORMS #</th>
          <td mat-cell *matCellDef="let row"> {{row.notStartedForms}} </td>
        </ng-container>
        <ng-container matColumnDef="undF">
          <th mat-header-cell *matHeaderCellDef>UND. FORMS #</th>
          <td mat-cell *matCellDef="let row"> {{row.undergoingForms}} </td>
        </ng-container>
        <ng-container matColumnDef="cnlF">
          <th mat-header-cell *matHeaderCellDef>CNL. FORMS #</th>
          <td mat-cell *matCellDef="let row"> {{row.canceledForms}} </td>
        </ng-container>
        <ng-container matColumnDef="comF">
          <th mat-header-cell *matHeaderCellDef>COM. FORMS #</th>
          <td mat-cell *matCellDef="let row"> {{row.completedForms}} </td>
        </ng-container>
        <ng-container matColumnDef="nstFP">
          <th mat-header-cell *matHeaderCellDef>NST. FORMS %</th>
          <td mat-cell *matCellDef="let row"> {{formatDec(row.notStartedFormsPer)}}%</td>
        </ng-container>
        <ng-container matColumnDef="undFP">
          <th mat-header-cell *matHeaderCellDef>UND. FORMS %</th>
          <td mat-cell *matCellDef="let row"> {{formatDec(row.undergoingFormsPer)}}%</td>
        </ng-container>
        <ng-container matColumnDef="cnlFP">
          <th mat-header-cell *matHeaderCellDef>CNL. FORMS %</th>
          <td mat-cell *matCellDef="let row"> {{formatDec(row.canceledFormsPer)}}%</td>
        </ng-container>
        <ng-container matColumnDef="comFP">
          <th mat-header-cell *matHeaderCellDef>COM. FORMS %</th>
          <td mat-cell *matCellDef="let row"> {{formatDec(row.completedFormsPer)}}%</td>
        </ng-container>
        <ng-container matColumnDef="avgT">
          <th mat-header-cell *matHeaderCellDef>AVG. DURATION</th>
          <td mat-cell *matCellDef="let row"> {{formatTime(row.averageCompletionTime)}} </td>
        </ng-container>
        <ng-container matColumnDef="lateF">
          <th mat-header-cell *matHeaderCellDef>LATE FORMS #</th>
          <td mat-cell *matCellDef="let row"> {{row.lateFormsCount}} </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No data matching the filter</td>
        </tr>
      </table>
    </div>
  </div>
  <div class="row mt-5">
    <h2 class="mb-3 h5 text-capitalize">No. Completed forms & assignments</h2>
    <div class="col-12">
      <div>
        <canvasjs-chart [options]="chartOptions" [styles]="{width: '100%', height:'360px'}"></canvasjs-chart>
      </div>
    </div>

  </div>
</div>
