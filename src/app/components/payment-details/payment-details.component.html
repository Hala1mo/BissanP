<div class="container">
  <div class="row mb-3 pb-3 border-bottom">
    <!--    ACTIONS   -->
    <div class="col-12">
      <button mat-raised-button color="primary" (click)="exportTable()">
        <mat-icon>cloud_download</mat-icon>
        Export Report
      </button>
    </div>
  </div>
  <div class="row overflow-x-auto">
    <h2 class="mb-3 h5 text-capitalize">Receipt Document</h2>

    <div class="col-6">
        <form [formGroup]="selectedUserForm">
          <mat-form-field [style.width.%]="100">
            <mat-label>Select User</mat-label>
            <input #userInput
                   type="text"
                   matInput
                   [formControl]="userSelectControl"
                   [matAutocomplete]="autoUser"
                   (input)="filterUsers()"
                   (focus)="filterUsers()"
            >
            <mat-autocomplete #autoUser="matAutocomplete" (optionSelected)="selectUser($event)"
                              [displayWith]="displayUser">
              <mat-option *ngFor="let option of filteredUsers" [value]="option">
                {{displayUser(option)}}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
      </form>
    </div>

    <div class="col-6">
    <form>
      <mat-form-field [style.width.%]="100">
        <mat-label>Select Customer</mat-label>
        <input #customerInput
               type="text"
               matInput
               [formControl]="customerSelectControl"
               [matAutocomplete]="autoCustomer"
               (input)="filterCustomers()"
               (focus)="filterCustomers()">
        <mat-autocomplete #autoCustomer="matAutocomplete" [displayWith]="displayCustomer"
                          (optionSelected)="selectCustomer($event)">
          <mat-option *ngFor="let customer of filteredCustomers" [value]="customer">
            {{displayCustomer(customer)}}
          </mat-option>
        </mat-autocomplete>

      </mat-form-field>
    </form>
</div>
    <table mat-table [dataSource]="rows" class="mat-elevation-z8" id="report-table">

      <ng-container matColumnDef="Customer">
        <th mat-header-cell *matHeaderCellDef> No. </th>
        <td mat-cell *matCellDef="let element"> {{element.customer.name}} </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="User">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let element"> {{element.user.firstName}} {{element.user.lastName}} </td>
      </ng-container>

      <!-- Weight Column -->
      <ng-container matColumnDef="Date">
        <th mat-header-cell *matHeaderCellDef> Date </th>
        <td mat-cell *matCellDef="let element"> {{element.date}} </td>
      </ng-container>

      <!-- Symbol Column -->
      <ng-container matColumnDef="Amount">
        <th mat-header-cell *matHeaderCellDef> Amount </th>
        <td mat-cell *matCellDef="let element"> {{element.amount + "$"}} </td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef> Visit Type </th>
        <td mat-cell *matCellDef="let element"> {{element.visitType}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>

  </div>
</div>


