<div *ngIf="!currentDefinition" class="container">
  <div class="spinner-border mx-auto my-auto">

  </div>
</div>
<div *ngIf="currentDefinition" class="container text-capitalize">
  <div class="row mb-1 py-1">
    <div class="d-flex justify-content-between">
      <div>
        <h1>{{currentDefinition.name}}</h1>
        <mat-chip-set>
          <mat-chip>{{currentDefinition.type.name}}</mat-chip>
        </mat-chip-set>
      </div>
      <div class="d-flex gap-1">
        <button mat-raised-button color="primary" (click)="openCreateAssignmentDialog()">
          Add Assignment
          <mat-icon>add</mat-icon>
        </button>
        <button mat-raised-button color="accent" (click)="openDefinitionEditDialog()">
          Edit Definition
          <mat-icon>edit</mat-icon>
        </button>
      </div>

    </div>
  </div>
  <div class="row mb-5 py-1 border-bottom">
    <div>
      <h3>{{currentDefinition.description}}</h3>
    </div>
    <div>
      <div>
        {{currentDefinition.allowRecurring ? 'Recurring every ' + currentDefinition.frequency + ' days' : 'One Time'}}
      </div>
      <div>
        Created On:
        <span class="primary-color text-decoration-underline">
            {{formatDateString(currentDefinition.createdTime)}}
          </span>
      </div>
      <div>
        Last Modified On:
        <span class="primary-color text-decoration-underline">
          {{formatDateString(currentDefinition.lastModifiedTime)}}
        </span>
      </div>
    </div>
  </div>
  <div class="row mb-3">
    <mat-tab-group>
      <mat-tab label="Assignments">
        <ng-template matTabContent>
          <div class="mx-0 my-3 mat-elevation-z4">
            <mat-paginator [pageSizeOptions]="[10,15,20]"
                           showFirstLastButtons
                           aria-label="Select page of assignments">
            </mat-paginator>
            <table mat-table [dataSource]="dataSource" matSort>
              <ng-container matColumnDef="date">
                <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by date">
                  Date
                </th>
                <td mat-cell *matCellDef="let assignment"> {{assignment.date}} </td>
              </ng-container>
              <ng-container matColumnDef="comment">
                <th mat-header-cell *matHeaderCellDef mat-sort-header sortActionDescription="Sort by comment">
                  Comment
                </th>
                <td class="text-capitalize" mat-cell *matCellDef="let assignment"> {{assignment.comment}} </td>
              </ng-container>
              <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef>
                  Actions
                </th>
                <td mat-cell *matCellDef="let assignment">
                  <button mat-icon-button color="primary" (click)="openAssignmentsDetails(assignment.id)">
                    <mat-icon>open_in_new</mat-icon>
                  </button>
                </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
          </div>
        </ng-template>
      </mat-tab>
      <mat-tab label="Reports">
        <ng-template matTabContent>
          Reports
        </ng-template>
      </mat-tab>
    </mat-tab-group>
  </div>

</div>


<!--<div class="container mt-5">-->
<!--  <h2>Details</h2>-->
<!--  <hr class="mb-3">-->
<!--  <div class="row ">-->
<!--    <div class="row border-bottom my-3 py-3">-->
<!--      <div class="col-12">-->
<!--        <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">-->

<!--          <div class="btn-group mb-3">-->
<!--            <div class="dropdown btn-group">-->
<!--              <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"-->
<!--                      aria-expanded="false">-->
<!--                Filtering-->
<!--              </button>-->

<!--            </div>-->

<!--            <div class="dropdown btn-group">-->
<!--              <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"-->
<!--                      aria-expanded="false">-->
<!--                Sort by Date-->
<!--              </button>-->

<!--            </div>-->
<!--          </div>-->

<!--        </div>-->
<!--      </div>-->
<!--    </div>-->

<!--    <div class="row">-->
<!--      <div class="col-4">-->
<!--        <div class="card p-3">-->
<!--          <div *ngIf="currentDefinition">-->
<!--            <h3>Name: {{ currentDefinition.name }}</h3>-->
<!--            <p>Description: {{ currentDefinition.description }}</p>-->
<!--            <p>VisitType Name: {{ currentDefinition.type.name }}</p>-->
<!--            <p>Frequency: {{ currentDefinition.frequency}}</p>-->
<!--            <h2>VisitAssignment</h2>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->

<!--      <div class="col-8">-->
<!--        <div class="mx-2 p-1">-->
<!--          <div *ngIf="!isEditMode">-->
<!--            <div class="card p-3">-->
<!--              <h3 class="mb=2 card-title">Add New Assignment</h3>-->
<!--              <div class="card-body">-->
<!--                <form class="form-group" [formGroup]="registrationForm" (ngSubmit)="onSubmit()">-->
<!--                  <div class="row">-->
<!--                    <div class="col-6">-->
<!--                      <mat-form-field>-->
<!--                        <mat-label>Choose a date</mat-label>-->
<!--                        <input matInput [matDatepicker]="picker" formControlName="date">-->
<!--                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>-->
<!--                        <mat-datepicker #picker></mat-datepicker>-->
<!--                      </mat-form-field>-->
<!--                    </div>-->
<!--                    <div class="col-6">-->
<!--                      <mat-form-field>-->
<!--                        <mat-label>Comment</mat-label>-->
<!--                        <textarea matInput formControlName="comment"></textarea>-->
<!--                      </mat-form-field>-->
<!--                    </div>-->
<!--                  </div>-->
<!--                  <div class="row">-->
<!--                    <div class="mb-3">-->
<!--                      <button [disabled]='!registrationForm.valid' class="btn btn-large btn-primary" type="submit">-->
<!--                        Register-->
<!--                      </button>-->
<!--                    </div>-->
<!--                  </div>-->
<!--                </form>-->
<!--              </div>-->
<!--            </div>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->
